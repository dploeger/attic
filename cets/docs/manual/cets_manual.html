<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>C!ETS - Cool! Edit This Site</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>C!ETS - Cool! Edit This Site</h1></div><div><h2 class="subtitle">Manual</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Dennis</span> <span class="surname"></span></h3><tt class="email">&lt;<a href="mailto:develop@dieploegers.de">develop@dieploegers.de</a>&gt;</tt></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#d0e17">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#d0e30">2. Using C!ETS</a></span></dt></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e17"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div><div></div></div><p>You know, I was searching for a script.</p><p>Something like a <span class="emphasis"><em><i class="firstterm">wiki</i></em></span>. But only for some sites. With no login, nothing, just editing a site. Finally I searched for a good WYSIWYG-Editor, found TinyMCE and utilized it in a small script to edit any site I - as the PHP-developer of the site - like.</p><p>And here it is: C!ETS. It's very simple actually. It does nothing more than help you with displaying the content, editing the content and storing the content. I use Pear_DB to have a better and global access to databases.</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e30"></a>Chapter&nbsp;2.&nbsp;Using C!ETS</h2></div></div><div></div></div><p>After you have included C!ETS using</p><p><span><b class="command"><span><b class="command">require_once("cets.php");</b></span></b></span></p><p>you can initiate the C!ETS-class using
</p><p><span><b class="command">$cets=new cets("&lt;mydsn&gt;");</b></span></p><p>with the Pear_DB-DSN-information &lt;mydsn&gt;.</p><p>You should use a HTTP-Parameter to control your script. I mostly use something like "action". So, when the user simply clicks on the link to the site, the parameter "action" isn't set, so we should display our page. Let's say it's the page "news".</p><p><span><b class="command">if (!(is_set($HTTP_GET_VARS['action']))) {</b></span></p><p><span><b class="command">    print $cets-&gt;displayContent("news");
    print '&lt;a href="index.php?action=edit"&gt;Edit&lt;/a&gt;';</b></span></p><p><span><b class="command">}</b></span></p><p>After displaying the content using print and the method displayContent, I printed out a link to edit the content by simply setting the parameter "action" to "edit". So, when the user clicks on this link, the page is loaded again and we shall display the edit window:</p><p><span><b class="command">if ($HTTP_GET_VARS['action'] == "edit") {</b></span></p><p><span><b class="command">    print $cets-&gt;editContent("news","index.php",array("action"=&gt;"save"),"GET");</b></span></p><p><span><b class="command">}</b></span></p><p>Now C!ETS displays the editor window within a form, that has the parameters action="index.php" and method="GET" (I used the GET-method here for example. You better use POST !). The array-parameter above tells C!ETS to display a hidden form element named "action" and give it the value "save". This again sets the action variable for our script. This time it's save, so the edited contents should be saved back to the database:</p><p><span><b class="command">if ($HTTP_GET_VARS['action'] == "save") {</b></span></p><p><span><b class="command">    $cets-&gt;saveContent("news",$HTTP_GET_VARS['CETSTextarea']);</b></span></p><p><span><b class="command">}</b></span></p><p>As you can see, C!ETS transfers the contents of the edit-window using the "CETSTextarea". Actually this is a complete working site. There's just one thing missing to get the editor started: tinymce needs some lines in the &lt;head&gt;-area of the HTML site. You can generate them using</p><p><span><b class="command">print $cets-&gt;getHeaders();</b></span></p><p>I hope you got the picture of how C!ETS works and how easy you can use it in your scripts.

For more advanced usage and all the other methods, please see the generated documentation in the docs/ - directory.
</p></div></div></body></html>